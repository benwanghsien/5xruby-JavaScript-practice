{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAIAC,SAASC,cAAc,WAAWC,iBAAiB,UAAU,SAAUC,GACrEA,EAAEC,iBAMF,IAAIC,EAAW,CACbC,KAAM,CAZVC,MAOgBP,SAASC,cAAc,UAAUO,MAPjDC,SAQmBT,SAASC,cAAc,aAAaO,MARvDE,SASmBV,SAASC,cAAc,aAAaO,QAUrDG,EAAAb,GACGc,KAAK,iCAAqBP,GAC1BQ,MAAMC,IACLd,SAASC,cAAc,UAAUc,UAAY,UAE9CC,OAAOC,IACNC,QAAQC,IAAIF,GACZjB,SAASC,cAAc,UAAUc,UAAY,aAInDf,SAASC,cAAc,UAAUC,iBAAiB,UAAU,SAAUkB,GACpEA,EAAEhB,iBAKF,IAAIC,EAAW,CACbC,KAAM,CArCVC,MAiCgBP,SAASC,cAAc,aAAaO,MAjCpDE,SAkCmBV,SAASC,cAAc,gBAAgBO,QASxDG,EAAAb,GACGc,KAAK,yCAA6BP,GAClCQ,MAAMC,IACL,MAAMO,EAAQP,EAAIQ,QAAQC,cAC1BC,aAAaC,QAAQ,QAASJ,GAC9BK,OAAOC,SAAW,0BAClB3B,SAASC,cAAc,UAAUc,UAAY,SAE9CC,OAAOC,IACNC,QAAQC,IAAIF,SAIlBjB,SAASC,cAAc,eAAeC,iBAAiB,UAAU,SAAU0B,GACzEA,EAAExB,iBAEF,MAAMiB,EAAQG,aAAaK,QAAQ,SAE/BR,EACFV,EAAAb,GACGgC,IAAI,iCAAqB,CACxBR,QAAS,CACPS,cAAeV,KAGlBR,MAAK,EApEZmB,KAoEeA,MACPhC,SAASC,cAAc,UAAUc,UAAY,GAAGiB,EAAKC,kBAEtDjB,OAAOC,IACNC,QAAQC,IAAIF,MAGhBjB,SAASC,cAAc,UAAUc,UAAY,UAIjDf,SAASC,cAAc,YAAYC,iBAAiB,UAAU,SAAUgC,GACtEA,EAAE9B,iBAEF,MAAMiB,EAAQG,aAAaK,QAAQ,SAE/BR,IACFV,EAAAb,GACGqC,OAAO,0CAA8B,CACpCb,QAAS,CACPS,cAAeV,KAGlBR,MAAK,EA3FZmB,KA2FeA,MACPhC,SAASC,cAAc,UAAUc,UAAYiB,EAAKC,WAEnDjB,OAAOC,IACNC,QAAQC,IAAIF,MAGhBO,aAAaY,WAAW","sources":["src/functions/app.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_BASE = \"https://todoo.5xcamp.us/\";\n\ndocument.querySelector(\"#signUp\").addEventListener(\"submit\", function (e) {\n  e.preventDefault();\n\n  const email = document.querySelector(\"#email\").value;\n  const nickname = document.querySelector(\"#nickname\").value;\n  const password = document.querySelector(\"#password\").value;\n\n  let userData = {\n    user: {\n      email,\n      nickname,\n      password,\n    },\n  };\n\n  axios\n    .post(`${API_BASE}/users`, userData)\n    .then((res) => {\n      document.querySelector(\".check\").innerText = \"註冊成功\";\n    })\n    .catch((e) => {\n      console.log(e);\n      document.querySelector(\".check\").innerText = \"註冊失敗\";\n    });\n});\n\ndocument.querySelector(\"#logIn\").addEventListener(\"submit\", function (e) {\n  e.preventDefault();\n\n  const email = document.querySelector(\"#emailLog\").value;\n  const password = document.querySelector(\"#passwordLog\").value;\n\n  let userData = {\n    user: {\n      email,\n      password,\n    },\n  };\n\n  axios\n    .post(`${API_BASE}/users/sign_in`, userData)\n    .then((res) => {\n      const token = res.headers.authorization;\n      localStorage.setItem(\"token\", token);\n      window.location = \"../pages/todo_page.html\";\n      document.querySelector(\".check\").innerText = \"已登入\";\n    })\n    .catch((e) => {\n      console.log(e);\n    });\n});\n\ndocument.querySelector(\"#checkLogin\").addEventListener(\"submit\", function (e) {\n  e.preventDefault();\n\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    axios\n      .get(`${API_BASE}/check`, {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then(({ data }) => {\n        document.querySelector(\".check\").innerText = `${data.message}, 已登入`;\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n  } else {\n    document.querySelector(\".check\").innerText = \"尚未登入\";\n  }\n});\n\ndocument.querySelector(\"#signOut\").addEventListener(\"submit\", function (e) {\n  e.preventDefault();\n\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    axios\n      .delete(`${API_BASE}/users/sign_out`, {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then(({ data }) => {\n        document.querySelector(\".check\").innerText = data.message;\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n\n    localStorage.removeItem(\"token\");\n  }\n});\n"],"names":["$fmRoT","parcelRequire","document","querySelector","addEventListener","e1","preventDefault","userData","user","email","value","nickname","password","$parcel$interopDefault","post","then","res","innerText","catch","e","console","log","e2","token","headers","authorization","localStorage","setItem","window","location","e3","getItem","get","Authorization","data","message","e4","delete","removeItem"],"version":3,"file":"index.c969b8d1.js.map"}